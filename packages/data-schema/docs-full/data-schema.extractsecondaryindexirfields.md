<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@aws-amplify/data-schema](./data-schema.md) &gt; [ExtractSecondaryIndexIRFields](./data-schema.extractsecondaryindexirfields.md)

## ExtractSecondaryIndexIRFields type

Extract fields that are eligible to be PK or SK fields with their resolved type.

Eligible fields include: 1. ModelField that contains string or number 2. inline EnumType 3. RefType that refers to a top level defined EnumType (this is enforced by validation that happens in the Schema Processor)

NOTE: at this point, there is no way to resolve the type from a RefType as we don't have access to the NonModelType at this location. So we generate am indicator string, and resolve its corresponding type later in packages/data-schema/src/runtime/client/index.ts

**Signature:**

```typescript
export type ExtractSecondaryIndexIRFields<T extends ModelTypeParamShape, RequiredOnly extends boolean = false> = {
    [FieldProp in keyof T['fields'] as T['fields'][FieldProp] extends BaseModelField<infer R> ? NonNullable<R> extends string | number ? RequiredOnly extends false ? FieldProp : null extends R ? never : FieldProp : never : T['fields'][FieldProp] extends EnumType | RefType<RefTypeParamShape, any, any> ? FieldProp : never]: T['fields'][FieldProp] extends BaseModelField<infer R> ? R : T['fields'][FieldProp] extends EnumType<infer values> ? values[number] : T['fields'][FieldProp] extends RefType<infer R, any, any> ? `${deferredRefResolvingPrefix}${R['link']}` : never;
};
```
**References:** [ModelTypeParamShape](./data-schema.modeltypeparamshape.md)<!-- -->, [BaseModelField](./data-schema.basemodelfield.md)<!-- -->, [EnumType](./data-schema.enumtype.md)<!-- -->, [RefType](./data-schema.reftype.md)<!-- -->, [RefTypeParamShape](./data-schema.reftypeparamshape.md)<!-- -->, [deferredRefResolvingPrefix](./data-schema.deferredrefresolvingprefix.md)

